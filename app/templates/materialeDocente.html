<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Materiale Docente</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/stylematerialedidattico.css') }}">
</head>
<body>
{% include 'header.html' %}

    <main>
        <h2>MATERIALE DIDATTICO</h2>

        <div class="error-message">
        {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flashes">
          {% for category, message in messages %}
            {% if category == 'materiale_success' %}
            <div class="alert alert-{{ category }}">{{ message }}</div>
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    </div>

        {% if materiali %}
            <div class="materiali-lista">
                {% for materiale in materiali %}
                    <div class="materiale-item">
                        <h3>{{ materiale['Titolo'] }}</h3>
                        <p>{{ materiale['Descrizione'] }}</p>
                        <p><strong>Tipo:</strong> {{ materiale['Tipo'] }}</p>
                        <div class="azioni">
                            <a href="{{ url_for('MaterialeDocente.serve_file', filename=materiale['File_Path']) }}" target="_blank" class="btn">Visualizza</a>
                            <a href="{{ url_for('MaterialeDocente.modifica_materiale', materiale_id=materiale['_id']) }}" class="btn">Modifica</a>
                            <a href="{{ url_for('MaterialeDocente.rimuovi_materiale', materiale_id=materiale['_id']) }}" class="btn btn-danger" onclick="return confirm('Sei sicuro di voler eliminare questo materiale?');">Rimuovi</a>
                        </div>
                    </div>

                {% endfor %}
            </div>
        {% else %}
            <p class="empty-message">Nessun materiale presente.</p>
        {% endif %}
        <div class="aggiungi-materiale">
            <a href="{{ url_for('MaterialeDocente.carica_materiale') }}" class="btn-aggiungi">Aggiungi Materiale Didattico</a>
        </div>
    </main>
</body>
